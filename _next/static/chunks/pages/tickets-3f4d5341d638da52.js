(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[824],{1568:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tickets",function(){return r(23)}])},23:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var s=r(5893),n=r(3051),i=r(5788),a=r(7294),l=r(4103),c=r(7629),u=r(4733),d=r(9312);let o=e=>{let{lottery:t,ticket:r,prize:n}=e;if(n.isZero())return(0,s.jsx)(c.Z.NoWin,{});let i=r.draw.numbers.map(e=>r.numbers.includes(e)).reduce((e,t)=>e+t,0);return(0,s.jsx)(c.Z.Prize,{matches:i,prize:n})},h=e=>{var t;let{lottery:r,ticket:n}=e,{account:i}=(0,l.Ge)(),[u,d]=(0,a.useState)(null),[h,w]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{n.draw&&(async()=>{let e=await r.getExtendedTicket(n);d(r.web3.utils.toBN(e.prize)),w(e.withdrawn)})()},[r,n.draw,n.id]),(0,s.jsxs)(c.Z,{date:n.date,onAction:!u||u.isZero()?null:()=>{r.withdrawPrize(n.id,i)},actionTitle:h?"Withdrawn":"Withdraw",actionEnabled:!h,children:[n.txHash?(0,s.jsx)(c.Z.Section,{title:"Transaction",children:(0,s.jsxs)("a",{href:"https://".concat("polygonscan.com","/tx/").concat(n.txHash),target:"_blank",rel:"noreferrer",children:[n.txHash.substring(0,22),"â€¦"]})}):null,(0,s.jsx)(c.Z.Numbers,{title:"Your Numbers",numbers:n.numbers,highlightedNumbers:null===(t=n.draw)||void 0===t?void 0:t.numbers}),n.draw?(0,s.jsx)(c.Z.Numbers,{title:"Drawn Numbers",numbers:n.draw.numbers,highlightedNumbers:n.numbers}):null,n.draw&&u?(0,s.jsx)(o,{lottery:r,ticket:n,prize:u}):null]})},w=e=>{let{lottery:t,account:r}=e,[n,i]=(0,a.useState)([]);return(0,a.useEffect)(()=>{(async()=>{let e=(await t.getTicketIds(r)).sort((e,t)=>t-e);i(await Promise.all(e.map(e=>t.getTicket(e))))})()},[r,t]),(0,s.jsx)("section",{className:"draws d-flex justify-content-start align-items-center flex-column flex-lg-row align-items-lg-start",children:n.map((e,r)=>(0,s.jsx)(h,{lottery:t,ticket:e},r))})},m=()=>{let{context:e,lottery:t}=(0,u.QG)();return(0,s.jsx)("section",{className:"past-draws",children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)(d.N,{title:"My Tickets"}),e.account?(0,s.jsx)(w,{lottery:t,account:e.account}):(0,s.jsx)("article",{children:(0,s.jsx)("p",{className:"past-draws__descr",children:"Please connect your wallet."})})]})})};function x(){return(0,s.jsxs)(i.t,{children:[(0,s.jsx)(n.h,{}),(0,s.jsx)(m,{})]})}}},function(e){e.O(0,[313,328,774,888,179],function(){return e(e.s=1568)}),_N_E=e.O()}]);